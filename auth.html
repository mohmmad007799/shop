<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Tahoma, Arial,sans-serif;}
body{
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:#fff;
}

.container{
  background:rgba(255,255,255,.1);
  padding:30px;
  border-radius:20px;
  width:320px;
  backdrop-filter:blur(10px);
  text-align:center;
}

h2{margin-bottom:20px;color:#00ffcc;}

.field{
  position:relative;
}

input{
  width:100%;
  padding:10px 40px 10px 10px;
  margin:8px 0;
  border-radius:8px;
  border:none;
  outline:none;
}

.eye{
  position:absolute;
  left:10px;
  top:50%;
  transform:translateY(-50%);
  cursor:pointer;
  font-size:18px;
  color:#555;
}

button{
  width:100%;
  padding:12px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#00ffcc;
  color:#000;
  font-weight:bold;
  transition: .2s;
}
button:hover{background:#00c3ff;}

.toggle{
  margin-top:15px;
  cursor:pointer;
  color:#00c3ff;
  text-decoration:underline;
  font-size:14px;
}

.error{color:#ff4d4d;font-size:13px;margin-top:8px;}
.success{color:#2ecc71;font-size:13px;margin-top:8px;}
</style>
</head>

<body>

<div class="container">
  <h2 id="formTitle">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
  <div id="msg"></div>

  <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">

  <div class="field">
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <span class="eye" onclick="togglePass('password')">ğŸ‘</span>
  </div>

  <div class="field" id="confirmField" style="display:none">
    <input type="password" id="confirmPassword" placeholder="ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <span class="eye" onclick="togglePass('confirmPassword')">ğŸ‘</span>
  </div>

  <button id="submitBtn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
  <div class="toggle" id="toggleForm">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</div>
</div>

<!-- Firebase SDK -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

// ================= Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø´Ø±ÙˆØ¹ Firebase =================
const firebaseConfig = {
  apiKey: "AIzaSyCmArZk0HDaTyIYWCvo4qUUs6wtbOug5fs",
  authDomain: "shop-65260.firebaseapp.com",
  projectId: "shop-65260",
  storageBucket: "shop-65260.appspot.com",
  messagingSenderId: "828188332596",
  appId: "1:828188332596:web:9727077b8210a7e63a3061",
  measurementId: "G-560CHRLKRQ"
};

// ================= ØªÙ‡ÙŠØ¦Ø© Firebase =================
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

// ================= DOM =================
const msg = document.getElementById("msg");
const formTitle = document.getElementById("formTitle");
const toggleForm = document.getElementById("toggleForm");
const submitBtn = document.getElementById("submitBtn");
const confirmField = document.getElementById("confirmField");
let isLogin = true;

// ================= ÙˆØ¸Ø§Ø¦Ù =================
function showError(text){ msg.className="error"; msg.textContent=text; }
function showSuccess(text){ msg.className="success"; msg.textContent=text; }
function togglePass(id){
  const i=document.getElementById(id);
  i.type=i.type==="password"?"text":"password";
}

// ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨
toggleForm.onclick = ()=>{
  isLogin = !isLogin;
  msg.textContent="";
  confirmField.style.display = isLogin?"none":"block";
  formTitle.textContent = isLogin?"ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„":"Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨";
  submitBtn.textContent = formTitle.textContent;
  toggleForm.textContent = isLogin?"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨":"Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
}

// Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø¥Ø±Ø³Ø§Ù„
submitBtn.onclick = async ()=>{
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const confirmPassword = document.getElementById("confirmPassword")?.value.trim();

  if(!email || !password || (!isLogin && !confirmPassword)){
    return showError("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
  }

  try {
    if(isLogin){
      // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
      await signInWithEmailAndPassword(auth, email, password);
      showSuccess("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ âœ”");
      setTimeout(()=>location.href="index.html",1000);
    } else {
      // Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
      if(password !== confirmPassword) return showError("ÙƒÙ„Ù…ØªØ§ Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚ØªÙŠÙ†");
      if(password.length < 8) return showError("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© (8 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„)");

      await createUserWithEmailAndPassword(auth, email, password);
      showSuccess("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ğŸ‰");
      setTimeout(()=>location.href="index.html",1000);
    }
  } catch (error) {
    showError(error.message);
  }
}
</script>

</body>
</html>
