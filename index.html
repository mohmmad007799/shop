<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ | Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>

<style>
/* ================= RESET ================= */
*{box-sizing:border-box;margin:0;padding:0;font-family:Tahoma, Arial,sans-serif;}
body{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}
button,input,a{user-select:auto;}
img{-webkit-user-drag:none;-webkit-touch-callout:none;user-select:none;}
body{background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff;padding-bottom:90px;}

/* ================= HEADER ================= */
header.top{
  position:sticky;top:0;z-index:1000;
  display:flex;align-items:center;gap:12px;
  padding:15px 18px;
  background:rgba(255,255,255,.12);
  backdrop-filter:blur(12px);
  border-bottom:1px solid rgba(255,255,255,.2);
}
header.top img.logo{width:40px;height:40px;border-radius:10px;}
header.top h1{font-size:18px;flex:1;}
header.top input{
  width:100%;padding:9px 14px;border-radius:14px;border:none;outline:none;
  background:rgba(255,255,255,.18);color:#fff;
}
header.top input::placeholder{color:rgba(255,255,255,.7);}
header.top button#loginBtn{
  background:linear-gradient(90deg,#00ffcc,#00c3ff);
  border:none;padding:6px 14px;border-radius:14px;
  cursor:pointer;font-size:12px;margin-left:10px;color:#000;
}
header.top button#loginBtn:hover{
  opacity:0.9;transform:scale(1.05);transition:.3s;
}

/* ================= CONTAINER ================= */
section.container{padding:15px;min-height:calc(100vh - 120px);display:flex;flex-direction:column;}

/* ================= ROW HEADER ================= */
.row-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;}
.row-header h3{font-size:18px;}
.row-header button{
  background:linear-gradient(90deg,#00ffcc,#00c3ff);color:#000;border:none;
  padding:6px 14px;border-radius:14px;font-size:12px;cursor:pointer;
}

/* ================= HORIZONTAL GRID ================= */
.horizontal-grid{
  display:flex;gap:12px;overflow-x:auto;padding-bottom:10px;cursor:grab;scroll-behavior:smooth;
}
.horizontal-grid::-webkit-scrollbar{display:none;}
.horizontal-grid:active{cursor:grabbing;}

/* ================= GRID ================= */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:14px;}

/* ================= CARD ================= */
.card{
  background:rgba(255,255,255,.18);backdrop-filter:blur(16px);
  border-radius:18px;padding:10px;cursor:pointer;transition:.3s;box-shadow:0 10px 30px rgba(0,0,0,.25);
  min-width:150px;
}
.card:hover{transform:translateY(-6px) scale(1.03);}
.card img{width:100%;height:110px;object-fit:cover;border-radius:14px;margin-bottom:8px;}
.card h4{font-size:14px;margin-bottom:4px;}
.card p{font-size:12px;color:rgba(255,255,255,.8);margin-bottom:6px;}
.price{font-weight:bold;color:#00ffcc;}

/* ================= ROW SECTIONS ================= */
.row-codes,.row-images,.row-programs{padding:12px;border-radius:20px;margin-bottom:18px;background:rgba(255,255,255,.08);}

/* ================= BOTTOM NAV ================= */
nav.bottom{
  position:fixed;bottom:0;left:0;right:0;background:rgba(255,255,255,.15);
  backdrop-filter:blur(12px);display:flex;justify-content:space-around;padding:7px 0;z-index:1000;
}
nav.bottom a{text-decoration:none;font-size:18px;color:#fff;opacity:.85;transition:.3s;}
nav.bottom a:hover{opacity:1;transform:scale(1.15);}

/* ================= NO RESULTS ================= */
.no-results{text-align:center;font-size:24px;color:#ff5555;margin:auto;flex:1;display:flex;justify-content:center;align-items:center;}
</style>
</head>

<body>

<header class="top">
  <img class="logo" src="Screenshot 2025-04-22 090937.png">
  <h1>ØªØ·Ø¨ÙŠÙ‚Ùƒ Ø§Ù„Ø±Ù‚Ù…ÙŠ</h1>
  <input id="search" type="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ Ø±Ù‚Ù…ÙŠ..." oninput="searchProducts()">
  <button id="loginBtn" onclick="location.href='auth.html'">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
</header>

<section class="container" id="productContainer"></section>

<nav class="bottom">
  <a href="index.html">ğŸ </a>
  <a href="add-product.html">â•</a>
  <a href="cart.html">ğŸ›’</a>
  <a href="profile.html">ğŸ‘¤</a>
</nav>

<script type="module">
// ===== Firebase Init =====
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_DOMAIN",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_BUCKET",
  messagingSenderId: "YOUR_SENDER",
  appId: "YOUR_APP_ID"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const container = document.getElementById("productContainer");
let products = [];

// ===== Categories =====
const categories = {
  codes:{title:"Ø£ÙƒÙˆØ§Ø¯",class:"row-codes"},
  images:{title:"ØµÙˆØ±",class:"row-images"},
  programs:{title:"Ø¨Ø±Ø§Ù…Ø¬",class:"row-programs"}
};

// ===== Display Rows =====
function displayRows(list){
  container.innerHTML="";
  for(const cat in categories){
    const items = list.filter(p=>p.category===cat);
    if(!items.length) continue;

    const section=document.createElement("div");
    section.className=categories[cat].class;
    section.innerHTML=`
      <div class="row-header">
        <h3>${categories[cat].title}</h3>
        <button onclick="viewAll('${cat}')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</button>
      </div>
      <div class="horizontal-grid"></div>
    `;
    const grid=section.querySelector(".horizontal-grid");
    items.forEach(p=>grid.appendChild(createCard(p)));
    container.appendChild(section);
  }
  enableDragScroll();
}

// ===== Create Card =====
function createCard(p){
  const card=document.createElement("div");
  card.className="card";
  card.onclick=()=>location.href=`product.html?id=${p.id}`;
  card.innerHTML=`
    <img src="${p.image}">
    <h4>${p.name}</h4>
    <p>${p.desc}</p>
    <div class="price">${p.price}$</div>
  `;
  return card;
}

// ===== Search Products =====
function searchProducts(){
  const q=document.getElementById("search").value.toLowerCase();
  if(!q){displayRows(products); return;}
  const filtered = products.filter(p=>p.name.toLowerCase().includes(q)||p.desc.toLowerCase().includes(q));
  
  container.innerHTML='<div class="grid"></div>';
  const grid=container.querySelector(".grid");
  if(filtered.length === 0){
    container.innerHTML=`<div class="no-results">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¨Ø­Ø«Ùƒ</div>`;
    return;
  }
  filtered.forEach(p=>grid.appendChild(createCard(p)));
}

// ===== View All Category =====
function viewAll(cat){
  container.innerHTML='<div class="grid"></div>';
  const grid=container.querySelector(".grid");
  products.filter(p=>p.category===cat).forEach(p=>grid.appendChild(createCard(p)));
}

// ===== Enable Drag Scroll =====
function enableDragScroll(){
  document.querySelectorAll(".horizontal-grid").forEach(slider=>{
    let isDown=false,startX,scrollLeft;
    slider.addEventListener("mousedown",e=>{isDown=true;startX=e.pageX-slider.offsetLeft;scrollLeft=slider.scrollLeft;});
    slider.addEventListener("mouseup",()=>isDown=false);
    slider.addEventListener("mouseleave",()=>isDown=false);
    slider.addEventListener("mousemove",e=>{
      if(!isDown) return;
      e.preventDefault();
      const x=e.pageX-slider.offsetLeft;
      slider.scrollLeft=scrollLeft-(x-startX);
    });
  });
}

// ===== Load Products from Firestore =====
async function loadProducts(){
  const querySnapshot = await getDocs(collection(db,"products"));
  products = [];
  querySnapshot.forEach(docSnap=>{
    products.push({...docSnap.data(), id:docSnap.id});
  });
  displayRows(products);
}

loadProducts();
</script>

</body>
</html>
